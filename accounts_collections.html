<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Accounts and Collections &mdash; DAVx‚Åµ DRAFT documentation</title><link rel="stylesheet" href="_static/css/davx5.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="canonical" href="https://www.davx5.com/manual/accounts_collections.html"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="WebDAV Mounts" href="webdav_mounts.html" />
    <link rel="prev" title="Introduction" href="introduction.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> DAVx‚Åµ
          </a>
              <div class="version">
                DRAFT
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Accounts and Collections</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-davx5-account">What is a DAVx‚Åµ account?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#how-does-service-discovery-work">How does service discovery work?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#what-is-the-base-url">What is the Base URL?</a></li>
<li class="toctree-l2"><a class="reference internal" href="#address-book-accounts">Address book accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#account-names">Account names</a></li>
<li class="toctree-l2"><a class="reference internal" href="#service-tabs">Service tabs</a></li>
<li class="toctree-l2"><a class="reference internal" href="#refreshing-the-collection-list">Refreshing the collection list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#read-only-collections">Read-only collections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-deleting-collections-on-from-the-server">Creating/deleting collections on/from the server</a></li>
<li class="toctree-l2"><a class="reference internal" href="#webcal-integration">Webcal integration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webdav_mounts.html">WebDAV Mounts</a></li>
<li class="toctree-l1"><a class="reference internal" href="settings.html">Settings</a></li>
<li class="toctree-l1"><a class="reference internal" href="technical_information.html">Technical information</a></li>
<li class="toctree-l1"><a class="reference internal" href="integration.html">Integration / API</a></li>
<li class="toctree-l1"><a class="reference internal" href="managed_davx5.html">Managed DAVx‚Åµ</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">DAVx‚Åµ</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Accounts and Collections</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/bitfireAT/davx5-manual/blob/main/accounts_collections.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="accounts-and-collections">
<h1>Accounts and Collections<a class="headerlink" href="#accounts-and-collections" title="Permalink to this headline">¬∂</a></h1>
<div class="section" id="what-is-a-davx5-account">
<h2>What is a DAVx‚Åµ account?<a class="headerlink" href="#what-is-a-davx5-account" title="Permalink to this headline">¬∂</a></h2>
<p>A DAVx‚Åµ account represents a connection to a CalDAV/CardDAV service, which can contain address books, calendars and task lists. Most services provide both CalDAV and CardDAV together (technically, this is when both CalDAV and CardDAV can be detected from the same starting point). In this case, you need only one DAVx‚Åµ account. However, you can also create multiple DAVx‚Åµ accounts for separate CalDAV/CardDAV services.</p>
<p>Contacts, events and tasks must be saved to a DAVx‚Åµ account so that DAVx‚Åµ can synchronize them. <strong>DAVx‚Åµ will not synchronize or otherwise touch entries that belong to other accounts (like Google or device-local accounts).</strong></p>
<p>When you add a DAVx‚Åµ account, you need either an email address or a base URL as the starting point for service discovery. You can find the required base URL in your server manual or ask your IT department. See our <a class="reference external" href="https://www.davx5.com/tested-with/">tested services</a> for a list of servers/services and how they‚Äôre used with DAVx‚Åµ.</p>
</div>
<div class="section" id="how-does-service-discovery-work">
<h2>How does service discovery work?<a class="headerlink" href="#how-does-service-discovery-work" title="Permalink to this headline">¬∂</a></h2>
<p>DAVx‚Åµ supports both <a class="reference external" href="https://tools.ietf.org/html/rfc6764">service location discovery by SRV/TXT records</a> and
<a class="reference external" href="https://tools.ietf.org/html/rfc5785">well-known URLs</a>. To use CalDAV and CardDAV in one DAVx‚Åµ account, provide these redirects on your server:</p>
<p><code class="docutils literal notranslate"><span class="pre">/.well-known/caldav</span></code> ‚Üí CalDAV service path (302 Found), like <code class="docutils literal notranslate"><span class="pre">/remote.php/caldav/</span></code>
<code class="docutils literal notranslate"><span class="pre">/.well-known/carddav</span></code> ‚Üí CardDAV service path (302 Found), like <code class="docutils literal notranslate"><span class="pre">/remote.php/carddav/</span></code></p>
<p>If these redirects are configured correctly, you can use the root URL <code class="docutils literal notranslate"><span class="pre">http(s)://your.server.example/</span></code>
without any additional paths as the base URL in DAVx‚Åµ.</p>
</div>
<div class="section" id="what-is-the-base-url">
<h2>What is the Base URL?<a class="headerlink" href="#what-is-the-base-url" title="Permalink to this headline">¬∂</a></h2>
<p>When logging in by URL, DAVx‚Åµ asks for the <em>Base URL</em>. This can be:</p>
<ul class="simple">
<li><p>the root URL (/) of your server if well-known URLs are configured (recommended), or</p></li>
<li><p>a valid CalDAV URL, i.e.</p>
<ul>
<li><p>a URL that provides a CalDAV <code class="docutils literal notranslate"><span class="pre">current-user-principal</span></code>, or</p></li>
<li><p>a URL that provides <code class="docutils literal notranslate"><span class="pre">calendar-home-set</span></code>, or</p></li>
<li><p>a calendar URL (<code class="docutils literal notranslate"><span class="pre">resourcetype:</span> <span class="pre">calendar</span></code>), and/or</p></li>
</ul>
</li>
<li><p>a valid CardDAV URL, i.e.</p>
<ul>
<li><p>a URL that provides a CardDAV <code class="docutils literal notranslate"><span class="pre">current-user-principal</span></code>, or</p></li>
<li><p>a URL that provides <code class="docutils literal notranslate"><span class="pre">addressbook-home-set</span></code>, or</p></li>
<li><p>an addressbook URL (<code class="docutils literal notranslate"><span class="pre">resourcetype:</span> <span class="pre">addressbook</span></code>).</p></li>
</ul>
</li>
</ul>
<p>So, DAVx‚Åµ will query the base URL for both CalDAV and CardDAV and use whatever it finds. If CalDAV and CardDAV are separated on your server and well-known URLs are not configured, you‚Äôll have to create two DAVx‚Åµ accounts: one for CalDAV (use the CalDAV URL as base URL) and one for CardDAV (use the CardDAV URL as base URL).</p>
<p>If the URL is entered without scheme, <code class="docutils literal notranslate"><span class="pre">https://</span></code> will be prepended. <a class="reference external" href="https://tools.ietf.org/html/rfc6352#section-13">Use of CalDAV/CardDAV over plain HTTP is not recommended for security reasons.</a></p>
</div>
<div class="section" id="address-book-accounts">
<h2>Address book accounts<a class="headerlink" href="#address-book-accounts" title="Permalink to this headline">¬∂</a></h2>
<p>In Android, contacts are assigned directly to accounts, without the possibility of having multiple address books (in contrast to events and tasks, where calendars and task lists are available as grouping entities).</p>
<p>So, DAVx‚Åµ defines a new account type ‚ÄúDAVx‚Åµ address book‚Äù beside the regular DAVx‚Åµ account type in order to provide support for multiple address books with one regular DAVx‚Åµ account.
<strong>The address book account names will be shown in your Contacts app as possible destinations for contacts.</strong></p>
<div class="figure align-default" id="id1">
<a class="reference external image-reference" href="_images/manual_system_accounts_with_davx5_account.png"><img alt="Screenshot: Android Settings / Accounts with configured DAVx‚Åµ account" src="_images/manual_system_accounts_with_davx5_account.png" /></a>
<p class="caption"><span class="caption-text">Android Settings / Accounts with configured DAVx5 account</span><a class="headerlink" href="#id1" title="Permalink to this image">¬∂</a></p>
</div>
<p>For every synchronized CardDAV address book, a DAVx‚Åµ address book account is created automatically. When synchronizing ‚Äúaddress books‚Äù of the main DAVx‚Åµ account, DAVx‚Åµ starts synchronizing contacts for every DAVx‚Åµ address book account.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Do not create, modify or delete DAVx‚Åµ address book accounts directly. Use the DAVx‚Åµ app to configure synchronized address books instead.</p>
</div>
<p>DAVx‚Åµ address books accounts are named after the CardDAV address book which they are connected to, plus a hash of the URL, for instance: <em>My addresses (UA)</em>
(in this case, the hash is <em>UA</em>). The hash is necessary when there are two address books with the same name.</p>
</div>
<div class="section" id="account-names">
<h2>Account names<a class="headerlink" href="#account-names" title="Permalink to this headline">¬∂</a></h2>
<p>When setting up a DAVx‚Åµ account, you will be asked for the account name. This account name (which
will be shown in the DAVx‚Åµ accounts list and in Android Settings / Accounts / DAVx‚Åµ) is used as
email address for scheduling (when events have attendees), so:</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you‚Äôre using CalDAV with an account, always use your email address as account name.</p>
</div>
<p>During initial resource detection, DAVx‚Åµ queries the <code class="docutils literal notranslate"><span class="pre">calendar-user-address-set</span></code> of the CalDAV
principal URL and suggests found email addresses as account name.</p>
<p>The account name must be unique, i.e. you can‚Äôt have two DAVx‚Åµ accounts with the same account name.
This is important if you need separate accounts for CalDAV and CardDAV. In this case, use
your email address as account name for the CalDAV account and another account name
(like ‚ÄúMy CardDAV Server‚Äù) for the CardDAV account.</p>
</div>
<div class="section" id="service-tabs">
<h2>Service tabs<a class="headerlink" href="#service-tabs" title="Permalink to this headline">¬∂</a></h2>
<p>If you open a DAVx‚Åµ account, you can see up to three tabs:</p>
<ol class="arabic simple">
<li><p>CardDAV ‚Äì lists your address books</p></li>
<li><p>CalDAV ‚Äì your calendars and task lists are there</p></li>
<li><p>Webcal ‚Äì subscribed calendars (Webcal) which have been provided over CalDAV</p></li>
</ol>
<p>Only available services (= those which have been detected during account setup)
will be shown. For instance, if you have added a CardDAV-only service (like
a Webmail service that doesn‚Äôt have calendars), only the CardDAV tab will show up.</p>
<p>When synchronization is active, it‚Äôs indicated by a progress bar on top of the tab. For instance,
if contacts are currently being synchronized, there will be an animated progress bar at the top of
the CardDAV tab. Pending synchronizations are indicated by a semi-transparent, non-animated progress
bar.</p>
<p><strong>To enable synchronization of a collection (address book/calendar/task list), select the checkmark of
the respective entry.</strong> Collection-specific actions (like viewing the collection properties or deleting the collection
from the server) are accessible over the action overflow (‚ãÆ) next to the entry.</p>
<p>Immediate synchronization of the whole account can be forced using the ‚ÄúSynchronization‚Äù floating
action button (üóò).</p>
<p>Actions which affect the whole account or more than one collection (like locally deleting the account
from the device or refreshing the collection list) are accessible over the action menu of the whole account view.</p>
</div>
<div class="section" id="refreshing-the-collection-list">
<span id="refresh-collections"></span><h2>Refreshing the collection list<a class="headerlink" href="#refreshing-the-collection-list" title="Permalink to this headline">¬∂</a></h2>
<p><strong>To detect new and changed address books/calendars, you have to refresh the collection list.</strong> To do so, open an account in DAVx‚Åµ, select a tab (for instance, CardDAV when you want to refresh address books) and then either swipe down or use the respective action menu (‚ãÆ) entry. When you refresh the collection list, DAVx‚Åµ will search the home sets for new collections and check the already known collections (whether they are still there and whether properties like name and color have been changed). These functions will only be available if a principal and/or homeset URL can be found for the respective protocol.</p>
<p>The collections and their properties (name, color, read-only) are not synchronized to the Android system immediately, but as soon as synchronization is triggered.</p>
<p>For example, if a calendar‚Äôs name and color have been changed on the server:</p>
<ul class="simple">
<li><p>Open the respective account in DAVx‚Åµ and select the CalDAV tab.</p></li>
<li><p>Swipe down or choose ‚ÄúRefresh calendar list‚Äù in the action menu (‚ãÆ). Now the new name and color will appear in the DAVx‚Åµ account, but not yet in the calendar app (because there was no synchronization yet).</p></li>
<li><p>As soon as synchronization is started, the changed properties (name, color) are commited to the Android calendar provider. Calendar apps will now show the new name and color.</p></li>
</ul>
</div>
<div class="section" id="read-only-collections">
<h2>Read-only collections<a class="headerlink" href="#read-only-collections" title="Permalink to this headline">¬∂</a></h2>
<p>There are two ways to restrict synchronization to one direction (only server to Android):</p>
<ol class="arabic simple">
<li><p>DAVx‚Åµ follows the WebDAV permissions from the server. If you don‚Äôt have write permissions for a specific collection, it will be treated as read-only.</p></li>
<li><p>If you have write permissions for a specific collection, you can force read-only mode (‚Äúone-way sync‚Äù) for this collection using the action overflow (‚ãÆ). You have to synchronize a collection before forced read-only takes effect. This is a convenience feature (for instance, for home usage) and doesn‚Äôt provide security. Any other CalDAV/CardDAV client could still modify the resources. If you need real security, restrict access on the server side with WebDAV ACL.</p></li>
</ol>
<p>Regardless of why a collection is read-only, it will be shown as read-only (‚õî) in the DAVx‚Åµ collection list.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Android doesn‚Äôt have native support for read-only address books. To emulate this feature, DAVx‚Åµ reverts local changes at every synchronization. You can still edit a contact in the Contacts app, but the changes will be reverted when this contact is synchronized from the server (at the latest when it‚Äôs changed on the server).</p>
</div>
<p>Read-only calendars will be marked as read-only in the Android calendar provider, so that calendar apps won‚Äôt be able to create/modify/delete events in such calendars anymore. Currently, there‚Äôs no read-only support for task lists.</p>
</div>
<div class="section" id="creating-deleting-collections-on-from-the-server">
<h2>Creating/deleting collections on/from the server<a class="headerlink" href="#creating-deleting-collections-on-from-the-server" title="Permalink to this headline">¬∂</a></h2>
<p>You can also manage collections with DAVx‚Åµ.</p>
<p>To create a collection, select the CalDAV or CardDAV tab in the DAVx‚Åµ account and then use the respective action menu (‚ãÆ) entry. For instance, choose ‚ÄúCreate new address book‚Äù next to ‚ÄúCardDAV‚Äù to create a new address book on the server. (This will only work if it‚Äôs supported by the server, which is not mandatory.) The same applies to calendars and task lists.</p>
<p>To delete a collection, choose ‚ÄúDelete collection‚Äù from the action overflow (‚ãÆ) of the respective collection in the DAVx‚Åµ account. After your confirmation, this will delete the collection and all its entries on the server, so be careful.</p>
</div>
<div class="section" id="webcal-integration">
<h2>Webcal integration<a class="headerlink" href="#webcal-integration" title="Permalink to this headline">¬∂</a></h2>
<p>DAVx‚Åµ recognizes Webcal calendars in the calendar home set which are published with
<code class="docutils literal notranslate"><span class="pre">resourcetype:</span> <span class="pre">subscribed</span></code> and shows them in the DAVx‚Åµ account activity. If you select such a Webcal collection for synchronization, DAVx‚Åµ passes
the URL to an installed Webcal-capable app like <a class="reference external" href="https://icsx5.bitfire.at">ICSx‚Åµ</a> so that this app can subscribe to the calendar.</p>
<p>If you‚Äôre using ICSx‚Åµ, DAVx‚Åµ can determine whether a Webcal collection is currently subscribed and can also remove the subscription again.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="introduction.html" class="btn btn-neutral float-left" title="Introduction" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="webdav_mounts.html" class="btn btn-neutral float-right" title="WebDAV Mounts" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright contributors. This work is licensed under a Creative Commons Attribution-ShareAlike 4.0 International License.
      <span class="lastupdated">Last updated on Nov 19, 2021.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>